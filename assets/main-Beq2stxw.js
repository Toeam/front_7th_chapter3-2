import{j as e,r as l,R as ae,a as ne}from"./client-DvaAtPIX.js";function oe({product:t,formatPrice:s,onEdit:i,onDelete:r}){return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s(t.price,t.id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.stock>10?"bg-green-100 text-green-800":t.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[t.stock,"개"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:t.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:i,className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),e.jsx("button",{onClick:r,className:"text-red-600 hover:text-red-900",children:"삭제"})]})]})}function ie(t){const{products:s,formatPrice:i,showProductForm:r,setShowProductForm:u,editingProduct:d,setEditingProduct:g,productForm:a,setProductForm:c,startEditProduct:N,deleteProduct:S,handleProductSubmit:P,addNotification:w}=t;return e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),e.jsx("button",{onClick:()=>{g("new"),c({name:"",price:0,stock:0,description:"",discounts:[]}),u(!0)},className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(p=>e.jsx(oe,{product:p,formatPrice:i,onEdit:()=>N(p),onDelete:()=>S(p.id)},p.id))})]})}),r&&e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d==="new"?"새 상품 추가":"상품 수정"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:a.name,onChange:p=>c({...a,name:p.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:a.description,onChange:p=>c({...a,description:p.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),e.jsx("input",{type:"text",value:a.price===0?"":a.price,onChange:p=>{const h=p.target.value;(h===""||/^\d+$/.test(h))&&c({...a,price:h===""?0:parseInt(h)})},onBlur:p=>{const h=p.target.value;h===""?c({...a,price:0}):parseInt(h)<0&&(w("가격은 0보다 커야 합니다","error"),c({...a,price:0}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),e.jsx("input",{type:"text",value:a.stock===0?"":a.stock,onChange:p=>{const h=p.target.value;(h===""||/^\d+$/.test(h))&&c({...a,stock:h===""?0:parseInt(h)})},onBlur:p=>{const h=p.target.value;h===""?c({...a,stock:0}):parseInt(h)<0?(w("재고는 0보다 커야 합니다","error"),c({...a,stock:0})):parseInt(h)>9999&&(w("재고는 9999개를 초과할 수 없습니다","error"),c({...a,stock:9999}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),e.jsxs("div",{className:"space-y-2",children:[a.discounts.map((p,h)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"number",value:p.quantity,onChange:k=>{const o=[...a.discounts];o[h].quantity=parseInt(k.target.value)||0,c({...a,discounts:o})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),e.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),e.jsx("input",{type:"number",value:p.rate*100,onChange:k=>{const o=[...a.discounts];o[h].rate=(parseInt(k.target.value)||0)/100,c({...a,discounts:o})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),e.jsx("span",{className:"text-sm",children:"% 할인"}),e.jsx("button",{type:"button",onClick:()=>{const k=a.discounts.filter((o,y)=>y!==h);c({...a,discounts:k})},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},h)),e.jsx("button",{type:"button",onClick:()=>{c({...a,discounts:[...a.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{g(null),c({name:"",price:0,stock:0,description:"",discounts:[]}),u(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:d==="new"?"추가":"수정"})]})]})})]})}function ce({coupon:t,onDelete:s}){return e.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:t.code}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:t.discountType==="amount"?`${t.discountValue.toLocaleString()}원 할인`:`${t.discountValue}% 할인`})})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}function de({coupons:t,showCouponForm:s,setShowCouponForm:i,couponForm:r,setCouponForm:u,deleteCoupon:d,handleCouponSubmit:g,addNotification:a}){return e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.map(c=>e.jsx(ce,{coupon:c,onDelete:()=>d(c.code)},c.code)),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:e.jsxs("button",{onClick:()=>i(!s),className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),s&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),e.jsx("input",{type:"text",value:r.name,onChange:c=>u({...r,name:c.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),e.jsx("input",{type:"text",value:r.code,onChange:c=>u({...r,code:c.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),e.jsxs("select",{value:r.discountType,onChange:c=>u({...r,discountType:c.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[e.jsx("option",{value:"amount",children:"정액 할인"}),e.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r.discountType==="amount"?"할인 금액":"할인율(%)"}),e.jsx("input",{type:"text",value:r.discountValue===0?"":r.discountValue,onChange:c=>{const N=c.target.value;(N===""||/^\d+$/.test(N))&&u({...r,discountValue:N===""?0:parseInt(N)})},onBlur:c=>{const N=parseInt(c.target.value)||0;r.discountType==="percentage"?N>100?(a("할인율은 100%를 초과할 수 없습니다","error"),u({...r,discountValue:100})):N<0&&u({...r,discountValue:0}):N>1e5?(a("할인 금액은 100,000원을 초과할 수 없습니다","error"),u({...r,discountValue:1e5})):N<0&&u({...r,discountValue:0})},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:r.discountType==="amount"?"5000":"10",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})})]})]})}function le({products:t,coupons:s,activeTab:i,setActiveTab:r,showProductForm:u,setShowProductForm:d,editingProduct:g,setEditingProduct:a,productForm:c,setProductForm:N,couponForm:S,setCouponForm:P,showCouponForm:w,setShowCouponForm:p,formatPrice:h,startEditProduct:k,deleteProduct:o,handleProductSubmit:y,handleCouponSubmit:n,deleteCoupon:x,addNotification:f}){return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>r("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${i==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),e.jsx("button",{onClick:()=>r("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${i==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),i==="products"?e.jsx(ie,{products:t,formatPrice:h,showProductForm:u,setShowProductForm:d,editingProduct:g,setEditingProduct:a,productForm:c,setProductForm:N,startEditProduct:k,deleteProduct:o,handleProductSubmit:y,addNotification:f}):e.jsx(de,{coupons:s,showCouponForm:w,setShowCouponForm:p,couponForm:S,setCouponForm:P,deleteCoupon:x,handleCouponSubmit:n,addNotification:f})]})}function ue({product:t,remainingStock:s,formatPrice:i,onAddToCart:r}){return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.isRecommended&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),t.discounts.length>0&&e.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",Math.max(...t.discounts.map(u=>u.rate))*100,"%"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:i(t.price,t.id)}),t.discounts.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[t.discounts[0].quantity,"개 이상 구매시 할인 ",t.discounts[0].rate*100,"%"]})]}),e.jsxs("div",{className:"mb-3",children:[s<=5&&s>0&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",s,"개 남음"]}),s>5&&e.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",s,"개"]})]}),e.jsx("button",{onClick:r,disabled:s<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${s<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:s<=0?"품절":"장바구니 담기"})]})]})}function xe({products:t,filteredProducts:s,debouncedSearchTerm:i,formatPrice:r,getRemainingStock:u,onAddToCart:d}){return e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",t.length,"개 상품"]})]}),s.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:['"',i,'"에 대한 검색 결과가 없습니다.']})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(g=>{const a=u(g);return e.jsx(ue,{product:g,remainingStock:a,formatPrice:r,onAddToCart:()=>d(g)},g.id)})})]})}function me({item:t,itemTotal:s,discountRate:i,onRemove:r,onIncrease:u,onDecrease:d}){return e.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:t.product.name}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-red-500 ml-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"−"})}),e.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:t.quantity}),e.jsx("button",{onClick:u,className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"+"})})]}),e.jsxs("div",{className:"text-right",children:[i>0&&e.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",i,"%"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(s).toLocaleString(),"원"]})]})]})]})}function he({totals:t,onCompleteOrder:s}){const i=t.totalBeforeDiscount-t.totalAfterDiscount;return e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"상품 금액"}),e.jsxs("span",{className:"font-medium",children:[t.totalBeforeDiscount.toLocaleString(),"원"]})]}),i>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"할인 금액"}),e.jsxs("span",{children:["-",i.toLocaleString(),"원"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[t.totalAfterDiscount.toLocaleString(),"원"]})]})]}),e.jsxs("button",{onClick:s,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[t.totalAfterDiscount.toLocaleString(),"원 결제하기"]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:e.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]})}function ge({coupons:t,selectedCode:s,onChange:i}){return t.length===0?null:e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),e.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:s||"",onChange:r=>{i(r.target.value||null)},children:[e.jsx("option",{value:"",children:"쿠폰 선택"}),t.map(r=>e.jsxs("option",{value:r.code,children:[r.name," (",r.discountType==="amount"?`${r.discountValue.toLocaleString()}원`:`${r.discountValue}%`,")"]},r.code))]})]})}function pe({products:t,filteredProducts:s,debouncedSearchTerm:i,cart:r,coupons:u,selectedCoupon:d,totals:g,formatPrice:a,getRemainingStock:c,addToCart:N,calculateItemTotal:S,removeFromCart:P,updateQuantity:w,applyCoupon:p,setSelectedCoupon:h,completeOrder:k}){return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(xe,{products:t,filteredProducts:s,debouncedSearchTerm:i,formatPrice:a,getRemainingStock:c,onAddToCart:N})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 space-y-4",children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"장바구니"]}),r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):e.jsx("div",{className:"space-y-3",children:r.map(o=>{const y=S(o),n=o.product.price*o.quantity,f=y<n?Math.round((1-y/n)*100):0;return e.jsx(me,{item:o,itemTotal:y,discountRate:f,onRemove:()=>P(o.product.id),onIncrease:()=>w(o.product.id,o.quantity+1),onDecrease:()=>w(o.product.id,o.quantity-1)},o.product.id)})})]}),r.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{coupons:u,selectedCode:d?.code??null,onChange:o=>{const y=u.find(n=>n.code===o);y?p(y):h(null)}}),e.jsx(he,{totals:g,onCompleteOrder:k})]})]})})]})}function fe(t={}){const[s,i]=l.useState(()=>{if(t.initialCart)return t.initialCart;const n=localStorage.getItem("cart");if(!n)return[];try{return JSON.parse(n)}catch{return[]}}),[r,u]=l.useState(t.initialSelectedCoupon??null);l.useEffect(()=>{s.length>0?localStorage.setItem("cart",JSON.stringify(s)):localStorage.removeItem("cart")},[s]);const d=l.useCallback(n=>{const x=s.find(b=>b.product.id===n.id);return n.stock-(x?.quantity||0)},[s]),g=(n,x)=>{const{discounts:f}=n.product,{quantity:b}=n,j=f.reduce((L,M)=>b>=M.quantity&&M.rate>L?M.rate:L,0);return x.some(L=>L.quantity>=10)?Math.min(j+.05,.5):j},a=(n,x)=>{const{price:f}=n.product,{quantity:b}=n,j=g(n,x);return Math.round(f*b*(1-j))},c=(n,x)=>{let f=0,b=0;return n.forEach(j=>{const T=j.product.price*j.quantity;f+=T,b+=a(j,n)}),x&&(x.discountType==="amount"?b=Math.max(0,b-x.discountValue):b=Math.round(b*(1-x.discountValue/100))),{totalBeforeDiscount:Math.round(f),totalAfterDiscount:Math.round(b)}},N=l.useMemo(()=>c(s,r),[s,r]),S=l.useCallback(n=>a(n,s),[s]),P=(n,x)=>{const f=n.find(b=>b.product.id===x.id);if(f){const b=f.quantity+1;return b>x.stock?n:n.map(j=>j.product.id===x.id?{...j,quantity:b}:j)}return[...n,{product:x,quantity:1}]},w=l.useCallback(n=>{if(d(n)<=0)return{ok:!1,reason:"OUT_OF_STOCK"};let f=!1;return i(b=>{const j=P(b,n);return j===b&&(f=!0),j}),f?{ok:!1,reason:"EXCEED_STOCK"}:{ok:!0}},[d]),p=l.useCallback(n=>{i(x=>x.filter(f=>f.product.id!==n))},[]),h=l.useCallback((n,x)=>{if(x<=0)return i(j=>j.filter(T=>T.product.id!==n)),{ok:!0};const f=s.find(j=>j.product.id===n);if(!f)return{ok:!1,reason:"NOT_FOUND"};const b=f.product.stock;return x>b?{ok:!1,reason:"EXCEED_STOCK"}:(i(j=>j.map(T=>T.product.id===n?{...T,quantity:x}:T)),{ok:!0})},[s]),k=l.useCallback(n=>{u(n)},[]),o=l.useCallback(()=>{i([]),u(null)},[]),y=l.useMemo(()=>s.reduce((n,x)=>n+x.quantity,0),[s]);return{cart:s,selectedCoupon:r,setSelectedCoupon:u,totals:N,totalItemCount:y,addToCart:w,removeFromCart:p,updateQuantity:h,applyCoupon:k,getRemainingStock:d,calculateItemTotal:S,clearCart:o}}function be(t){const[s,i]=l.useState(()=>{const o=localStorage.getItem("products");if(o)try{return JSON.parse(o)}catch{return t.initialProducts}return t.initialProducts}),[r,u]=l.useState(""),[d,g]=l.useState(""),[a,c]=l.useState(null),[N,S]=l.useState({name:"",price:0,stock:0,description:"",discounts:[]});l.useEffect(()=>{localStorage.setItem("products",JSON.stringify(s))},[s]),l.useEffect(()=>{const o=setTimeout(()=>{g(r)},500);return()=>clearTimeout(o)},[r]);const P=l.useMemo(()=>{if(!d)return s;const o=d.toLowerCase();return s.filter(y=>y.name.toLowerCase().includes(o)||y.description&&y.description.toLowerCase().includes(o))},[d,s]);return{products:s,setProducts:i,searchTerm:r,setSearchTerm:u,debouncedSearchTerm:d,filteredProducts:P,editingProduct:a,setEditingProduct:c,productForm:N,setProductForm:S,addProduct:o=>{const y={...o,id:`p${Date.now()}`};i(n=>[...n,y])},updateProduct:(o,y)=>{i(n=>n.map(x=>x.id===o?{...x,...y}:x))},deleteProduct:o=>{i(y=>y.filter(n=>n.id!==o))},startEditProduct:o=>{c(o.id),S({name:o.name,price:o.price,stock:o.stock,description:o.description||"",discounts:o.discounts||[]})}}}function ye(t){const[s,i]=l.useState(()=>{const d=localStorage.getItem("coupons");if(d)try{return JSON.parse(d)}catch{return t.initialCoupons}return t.initialCoupons});return l.useEffect(()=>{localStorage.setItem("coupons",JSON.stringify(s))},[s]),{coupons:s,setCoupons:i,addCoupon:d=>s.find(a=>a.code===d.code)?{ok:!1,reason:"DUPLICATE_CODE"}:(i(a=>[...a,d]),{ok:!0}),deleteCoupon:d=>{i(g=>g.filter(a=>a.code!==d))}}}function je(){const[t,s]=l.useState([]),i=l.useCallback((u,d="success")=>{const g=Date.now().toString();s(a=>[...a,{id:g,message:u,type:d}]),setTimeout(()=>{s(a=>a.filter(c=>c.id!==g))},3e3)},[]),r=l.useCallback(u=>{s(d=>d.filter(g=>g.id!==u))},[]);return{notifications:t,addNotification:i,removeNotification:r}}const Ne=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],ve=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],ke=()=>{const{products:t,searchTerm:s,setSearchTerm:i,debouncedSearchTerm:r,filteredProducts:u,editingProduct:d,setEditingProduct:g,productForm:a,setProductForm:c,addProduct:N,updateProduct:S,deleteProduct:P,startEditProduct:w}=be({initialProducts:Ne}),{cart:p,selectedCoupon:h,setSelectedCoupon:k,totals:o,totalItemCount:y,addToCart:n,removeFromCart:x,updateQuantity:f,getRemainingStock:b,calculateItemTotal:j,clearCart:T}=fe(),{coupons:L,addCoupon:M,deleteCoupon:R}=ye({initialCoupons:ve}),[E,_]=l.useState(!1),{notifications:V,addNotification:v,removeNotification:H}=je(),[U,A]=l.useState(!1),[z,J]=l.useState("products"),[K,q]=l.useState(!1),[B,$]=l.useState({name:"",code:"",discountType:"amount",discountValue:0}),W=(m,C)=>{if(C){const D=t.find(O=>O.id===C);if(D&&b(D)<=0)return"SOLD OUT"}return E?`${m.toLocaleString()}원`:`₩${m.toLocaleString()}`},X=l.useCallback(m=>{if(o.totalAfterDiscount<1e4&&m.discountType==="percentage"){v("percentage 쿠폰은 10,000원 이상 구매 시 사용 가능합니다.","error");return}k(m),v("쿠폰이 적용되었습니다.","success")},[v,o,k]),Q=l.useCallback(()=>{const m=`ORD-${Date.now()}`;v(`주문이 완료되었습니다. 주문번호: ${m}`,"success"),T()},[v,T]),F=l.useCallback(m=>{N(m),v("상품이 추가되었습니다.","success")},[N,v]),G=l.useCallback((m,C)=>{S(m,C),v("상품이 수정되었습니다.","success")},[S,v]),Y=l.useCallback(m=>{const C=M(m);if(!C.ok&&C.reason==="DUPLICATE_CODE"){v("이미 존재하는 쿠폰 코드입니다.","error");return}v("쿠폰이 추가되었습니다.","success")},[M,v]),Z=l.useCallback(m=>{w(m),q(!0)},[w,q]),ee=l.useCallback((m,C)=>{const D=f(m,C);if(!D.ok&&D.reason==="EXCEED_STOCK"){const O=t.find(I=>I.id===m);if(O){const I=O.stock;v(`재고는 ${I}개까지만 있습니다.`,"error")}}},[f,t,v]),te=l.useCallback(m=>{const C=n(m);if(C.ok)v("장바구니에 담았습니다","success");else if(C.reason==="OUT_OF_STOCK")v("재고가 부족합니다!","error");else if(C.reason==="EXCEED_STOCK"){const D=m.stock;v(`재고는 ${D}개까지만 있습니다.`,"error")}},[n,v]),se=m=>{m.preventDefault(),d&&d!=="new"?(G(d,a),g(null)):F({...a,discounts:a.discounts}),c({name:"",price:0,stock:0,description:"",discounts:[]}),g(null),q(!1)},re=m=>{m.preventDefault(),Y(B),$({name:"",code:"",discountType:"amount",discountValue:0}),A(!1)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[V.length>0&&e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:V.map(m=>e.jsxs("div",{className:`p-4 rounded-md shadow-md text-white flex justify-between items-center ${m.type==="error"?"bg-red-600":m.type==="warning"?"bg-yellow-600":"bg-green-600"}`,children:[e.jsx("span",{className:"mr-2",children:m.message}),e.jsx("button",{onClick:()=>H(m.id),className:"text-white hover:text-gray-200",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},m.id))}),e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!E&&e.jsx("div",{className:"ml-8 flex-1 max-w-md",children:e.jsx("input",{type:"text",value:s,onChange:m=>i(m.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>_(!E),className:`px-3 py-1.5 text-sm rounded transition-colors ${E?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:E?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!E&&e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),p.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:y})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:E?e.jsx(le,{products:t,coupons:L,activeTab:z,setActiveTab:J,showProductForm:K,setShowProductForm:q,editingProduct:d,setEditingProduct:g,productForm:a,setProductForm:c,couponForm:B,setCouponForm:$,showCouponForm:U,setShowCouponForm:A,formatPrice:W,startEditProduct:Z,deleteProduct:P,handleProductSubmit:se,handleCouponSubmit:re,deleteCoupon:R,addNotification:v}):e.jsx(pe,{products:t,filteredProducts:u,debouncedSearchTerm:r,cart:p,coupons:L,selectedCoupon:h,totals:o,formatPrice:W,getRemainingStock:b,addToCart:te,calculateItemTotal:j,removeFromCart:x,updateQuantity:ee,applyCoupon:X,setSelectedCoupon:k,completeOrder:Q})})]})};ae.createRoot(document.getElementById("root")).render(e.jsx(ne.StrictMode,{children:e.jsx(ke,{})}));
